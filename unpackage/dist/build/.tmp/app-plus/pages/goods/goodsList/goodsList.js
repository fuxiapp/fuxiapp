(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goodsList/goodsList"],{"071e":function(e,t,s){"use strict";s.r(t);var o=s("3e24"),i=s.n(o);for(var n in o)"default"!==n&&function(e){s.d(t,e,function(){return o[e]})}(n);t["default"]=i.a},"3e24":function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){return s.e("components/uni/uni-load-more/uni-load-more").then(s.bind(null,"8972"))},i=function(){return s.e("components/selType").then(s.bind(null,"3a26"))},n={data:function(){return{listData:[],last_id:"",reload:!1,status:"more",contentText:{contentdown:"上拉加载更多",contentrefresh:"加载中",contentnomore:"没有更多数据了"},priceByType:0,para:{pageSize:10,pageNum:1,orderBy:"",keyword:"",goodsType:"",age:"",season:"",supplier:""},classTypeInfo:[],AgeTypeInfo:[],seasonTypeInfo:[],supplierTypeInfo:[],isShowType:!1,typeNumber:1}},onReachBottom:function(){this.status="more",this.getMoreInfo()},onLoad:function(){this.getList()},onNavigationBarButtonTap:function(e){var t=e.index;0==t?this.toAddGoods():1==t&&this.scoInfo()},methods:{clearSearch:function(){this.para.keyword="",this.getList()},getList:function(){var e=this;this.countPage=0,this.listData=[],this.last_id="",this.status="more",this.$API.get("/fuxi/goods/query-goods-list",this.para).then(function(t){if("success"===t.code){if(e.countPage=t.data.pages,0===t.data.total)return void(e.status="finish");for(var s=t.data.list,o=0;o<s.length;o++)s[o].image=e.$URL+s[o].code+".jpg";e.listData=e.reload?s:e.listData.concat(s),e.last_id=s[s.length-1].id,e.reload=!1}})},getMoreInfo:function(){var e=this;this.countPage!==this.para.pageNum?(this.last_id&&(this.status="loading"),this.para.pageNum++,this.$API.get("/fuxi/goods/query-goods-list",this.para).then(function(t){if("success"===t.code){for(var s=t.data.list,o=0;o<s.length;o++)s[o].image=e.$URL+s[o].code+".jpg";e.listData=e.reload?s:e.listData.concat(s),e.last_id=s[s.length-1].id,e.reload=!1}})):this.status="finish"},sortPrice:function(){0===this.priceByType||2===this.priceByType?(this.priceByType=1,this.para.orderBy="retailsales asc"):1===this.priceByType&&(this.priceByType=2,this.para.orderBy="retailsales desc"),this.getList()},handleError:function(e){this.listData[e].image="../../../static/err_img.png"},onType:function(e){1===this.typeNumber?this.classTypeInfo[e].flg=!this.classTypeInfo[e].flg:2===this.typeNumber?this.AgeTypeInfo[e].flg=!this.AgeTypeInfo[e].flg:3===this.typeNumber?this.seasonTypeInfo[e].flg=!this.seasonTypeInfo[e].flg:4===this.typeNumber&&(this.supplierTypeInfo[e].flg=!this.supplierTypeInfo[e].flg)},opentType:function(e){var t=this;if(this.typeNumber=e,this.isShowType=!0,1===e){if(this.classTypeInfo.length>0)return;this.$API.get("/fuxi/select/query-goods-type").then(function(e){if("success"===e.code)for(var s=e.data,o=0;o<s.length;o++){var i={name:s[o].goodsType,goodsTypeId:s[o].goodsTypeId,flg:!1};t.classTypeInfo.push(i)}})}else if(2===e){if(this.AgeTypeInfo.length>0)return;this.$API.get("/fuxi/select/query-age").then(function(e){if("success"===e.code)for(var s=e.data,o=0;o<s.length;o++){var i={name:s[o].age,flg:!1};t.AgeTypeInfo.push(i)}})}else if(3===e){if(this.seasonTypeInfo.length>0)return;this.$API.get("/fuxi/select/query-season").then(function(e){if("success"===e.code)for(var s=e.data,o=0;o<s.length;o++){var i={name:s[o].season,goodsTypeId:s[o].goodsTypeId,flg:!1};t.seasonTypeInfo.push(i)}})}else if(4===e){if(this.supplierTypeInfo.length>0)return;this.$API.get("/fuxi/select/query-supplier").then(function(e){if("success"===e.code)for(var s=e.data,o=0;o<s.length;o++){var i={name:s[o].supplier,supplierId:s[o].supplierId,flg:!1};t.supplierTypeInfo.push(i)}})}},okType:function(){this.isShowType=!1;var e="";if(1===this.typeNumber){for(var t=0;t<this.classTypeInfo.length;t++)!0===this.classTypeInfo[t].flg&&(e=e+this.classTypeInfo[t].name+",");this.para.goodsType=e}else if(2===this.typeNumber){for(var s=0;s<this.AgeTypeInfo.length;s++)this.AgeTypeInfo[s].flg&&(e=e+this.AgeTypeInfo[s].name+",");this.para.age=e}else if(3===this.typeNumber){for(var o=0;o<this.seasonTypeInfo.length;o++)this.seasonTypeInfo[o].flg&&(e=e+this.seasonTypeInfo[o].name+",");this.para.season=e}else if(4===this.typeNumber){for(var i=0;i<this.supplierTypeInfo.length;i++)this.supplierTypeInfo[i].flg&&(e=e+this.supplierTypeInfo[i].name+",");this.para.supplier=e}this.getList()},scoInfo:function(){var t=this;e.scanCode({success:function(e){t.$API.get("\t/fuxi/barcode/barcode-parsing",{barcode:e.result}).then(function(e){e.code})},fail:function(e){console.log(e," at pages\\goods\\goodsList\\goodsList.vue:313")}})},toAddGoods:function(){this.$API.to("../goodsAdd/goodsAdd")}},components:{uniLoadMore:o,selType:i}};t.default=n}).call(this,s("6e42")["default"])},"8fdb":function(e,t,s){"use strict";var o=s("e939"),i=s.n(o);i.a},c3c0:function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},i=[];s.d(t,"a",function(){return o}),s.d(t,"b",function(){return i})},e939:function(e,t,s){},e9d0:function(e,t,s){"use strict";s.r(t);var o=s("c3c0"),i=s("071e");for(var n in i)"default"!==n&&function(e){s.d(t,e,function(){return i[e]})}(n);s("8fdb");var a=s("2877"),r=Object(a["a"])(i["default"],o["a"],o["b"],!1,null,"29f2a915",null);t["default"]=r.exports}},[["51cb","common/runtime","common/vendor"]]]);